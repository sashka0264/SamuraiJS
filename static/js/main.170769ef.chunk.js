(window["webpackJsonpreact-is-just"]=window["webpackJsonpreact-is-just"]||[]).push([[1],{133:function(e,t,n){e.exports=n(223)},22:function(e,t,n){e.exports={appNav:"Navbar_appNav__1NKBo",appNavImage:"Navbar_appNavImage__3lbZ9",appNavLink:"Navbar_appNavLink__1twK2"}},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(45),s=n.n(u),o=n(32),c=n(33),i=n(35),l=n(34),p=n(36),f=n(16),d=n(21),g=n(17),m=n(19),h=n(78),b=(n(141),n(31)),v=n(79),P=n(5);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(v.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w={app:{initialized:!1},auth:{userId:null,email:null,login:null,isAuth:!1},profilePage:{posts:[],profile:{},status:""},messagesPage:{dialogs:[{id:1,name:"\u0423\u043b\u044f"},{id:2,name:"\u0410\u043d\u043d\u0430"},{id:3,name:"\u0412\u043b\u0430\u0434"},{id:4,name:"\u0422\u0438\u043c\u0443\u0440"},{id:5,name:"\u0410\u043d\u0434\u0440\u0435\u0439"}],messages:[{id:1,content:"\u041f\u0440\u0438\u0432\u0435\u0442"},{id:2,content:"\u041a\u0430\u043a \u0434\u0435\u043b\u0430?"},{id:3,content:":3"}]},sidebar:{},usersPage:{pageSize:30,pagePeriod:{usePage:1,control:10},totalUsersCount:0,currentPage:1,users:[],loading:!1,followingInProgress:[]}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.e:return O({},e,{profile:O({},e.profile,{photos:t.photos})});case P.h:return O({},e,{usersPage:O({},e.usersPage,{pagePeriod:O({},e.usersPage.pagePeriod,{usePage:t.usePage})})});case P.f:var n={id:Date.now(),content:t.content};return O({},e,{messagesPage:O({},e.messagesPage,{messages:[].concat(Object(b.a)(e.messagesPage.messages),[n])})});case P.a:var r={id:Date.now(),message:t.postMessage,likes:0};return O({},e,{profilePage:O({},e.profilePage,{posts:[r].concat(Object(b.a)(e.profilePage.posts))})});case P.c:return O({},e,{usersPage:O({},e.usersPage,{users:e.usersPage.users.map(function(e){return e.id===t.id?O({},e,{followed:!0}):e})})});case P.p:return O({},e,{usersPage:O({},e.usersPage,{users:e.usersPage.users.map(function(e){return e.id===t.id?O({},e,{followed:!1}):e})})});case P.j:return O({},e,{usersPage:O({},e.usersPage,{users:Object(b.a)(t.users)})});case P.g:return O({},e,{usersPage:O({},e.usersPage,{currentPage:t.page})});case P.i:return O({},e,{usersPage:O({},e.usersPage,{totalUsersCount:t.count})});case P.o:return O({},e,{usersPage:O({},e.usersPage,{loading:t.loadingStatus})});case P.l:return O({},e,{profilePage:O({},e.profilePage,{profile:O({},t.profile)})});case P.k:return O({},e,{auth:O({},e.auth,{userId:t.userId,email:t.email,login:t.login,isAuth:t.isAuth})});case P.n:return O({},e,{usersPage:O({},e.usersPage,{followingInProgress:t.status?[].concat(Object(b.a)(e.usersPage.followingInProgress),[t.userId]):e.usersPage.followingInProgress.filter(function(e){return e!==t.userId})})});case P.m:return O({},e,{profilePage:O({},e.profilePage,{status:t.status})});case P.d:return O({},e,{app:O({},e.app,{initialized:!0})});case P.b:return O({},e,{profilePage:O({},e.profilePage,{posts:e.profilePage.posts.filter(function(e){return e.id!==t.id})})});default:return e}},j=n(76),S=Object(m.c)({global:y,form:j.a}),N=Object(m.e)(S,Object(m.a)(h.a));window.store=N;var k=n(30),I=n.n(k),x=function(e){var t=e.isAuth,n=e.login,r=e.logoutTC;return a.a.createElement("header",{className:I.a.appHeader},a.a.createElement("div",{className:I.a.appHeaderLoginBlock},a.a.createElement(f.b,{className:I.a.appHeaderLogIn,to:"/login"},a.a.createElement("span",null,t?"".concat(n):"\u0412\u043e\u0439\u0442\u0438")),a.a.createElement("span",{onClick:function(){return r()},className:I.a.appHeaderLogOut},t?"\u0412\u044b\u0439\u0442\u0438":null)))},A=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(x,this.props)}}]),t}(r.Component),L=Object(g.b)(function(e){var t=e.global;return{isAuth:t.auth.isAuth,login:t.auth.login}},{logoutTC:P.y})(A),T=n(83),C=n.n(T),_=n(84),U=n.n(_),D=n(85),z=n.n(D),R=n(22),H=n.n(R),G=Object(g.b)(function(e){return{isAuth:e.global.auth.isAuth}},null)(function(e){var t=e.isAuth;return a.a.createElement("nav",{className:H.a.appNav},t&&a.a.createElement(f.b,{to:"/profile",className:H.a.appNavLink},a.a.createElement("img",{alt:"profile-icon",src:U.a,className:H.a.appNavImage}),"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),t&&a.a.createElement(f.b,{to:"/dialogs",className:H.a.appNavLink},a.a.createElement("img",{alt:"message-icon",src:C.a,className:H.a.appNavImage}),"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),a.a.createElement(f.b,{to:"/users",className:H.a.appNavLink},a.a.createElement("img",{alt:"friends-icon",src:z.a,className:H.a.appNavImage}),"\u041d\u0430\u0439\u0442\u0438 \u0434\u0440\u0443\u0437\u0435\u0439"))}),B=n(24),M=function(e,t){return function(n){var u=t?a.a.createElement(t,null):null;return a.a.createElement(r.Suspense,{fallback:u},a.a.createElement(e,n))}},W=n(55),F=n.n(W),J=a.a.lazy(function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,318))}),K=a.a.lazy(function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,316))}),Z=a.a.lazy(function(){return n.e(9).then(n.bind(null,312))}),q=a.a.lazy(function(){return n.e(8).then(n.bind(null,313))}),Q=a.a.lazy(function(){return n.e(10).then(n.bind(null,314))}),V=a.a.lazy(function(){return n.e(6).then(n.bind(null,317))}),Y=a.a.lazy(function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,315))}),X=function(){return a.a.createElement(g.a,{store:N},a.a.createElement(f.a,{basename:"/SamuraiJS"}," ",a.a.createElement(ee,null))," ")},$=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.initializeAppTC)()}},{key:"render",value:function(){return this.props.initialized?a.a.createElement("div",{className:F.a.appWrapper},a.a.createElement(L,null),a.a.createElement(G,null),a.a.createElement("div",{className:F.a.appReference},a.a.createElement(d.b,{path:"/profile/:userId?",render:M(K,null)}),a.a.createElement(d.b,{path:"/dialogs",render:M(J,B.a)}),a.a.createElement(d.b,{path:"/news",render:M(Z,B.a)}),a.a.createElement(d.b,{path:"/music",render:M(q,B.a)}),a.a.createElement(d.b,{path:"/settings",render:M(Q,B.a)}),a.a.createElement(d.b,{path:"/users",render:M(V,null)}),a.a.createElement(d.b,{path:"/login",render:M(Y,B.a)}))):a.a.createElement(B.a,null)}}]),t}(r.Component),ee=Object(m.d)(d.f,Object(g.b)(function(e){return{initialized:e.global.app.initialized}},{getMeTC:P.s,initializeAppTC:P.w}))($);n(222);s.a.render(a.a.createElement(X,null),document.getElementById("root"))},24:function(e,t,n){"use strict";var r=n(0),a=n.n(r);n(221);t.a=function(){return a.a.createElement("div",{className:"lds-css ng-scope"},a.a.createElement("div",{className:"lds-rolling"},a.a.createElement("div",null)))}},30:function(e,t,n){e.exports={appHeader:"Header_appHeader__2gyR7",appHeaderLoginBlock:"Header_appHeaderLoginBlock__1w5i1",appHeaderLogOut:"Header_appHeaderLogOut__2xkJN"}},5:function(e,t,n){"use strict";var r=n(4),a=n.n(r),u=n(11),s=n(80).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"9c4c0b67-afad-4fc5-8099-60e295f78a94"}}),o={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return s.get("users?page=".concat(e,"&count=").concat(t)).then(function(e){return e.data})},getDeleteUser:function(e){return s.delete("follow/".concat(e)).then(function(e){return e.data})},getPostUser:function(e){return s.post("follow/".concat(e)).then(function(e){return e.data})}},c=function(e){return s.get("profile/".concat(e)).then(function(e){return e.data})},i=function(e){return s.get("profile/status/".concat(e)).then(function(e){return e.data})},l=function(e){return s.put("profile/status",{status:e}).then(function(e){return e.data})},p=function(e){var t=new FormData;return t.append("image",e),s.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})},f=function(){return s.get("auth/me").then(function(e){return e.data})},d=function(e,t,n){return s.post("auth/login",{email:e,password:t,rememberMe:n}).then(function(e){return e.data})},g=function(){return s.delete("auth/login")},m=n(47);n.d(t,"f",function(){return h}),n.d(t,"a",function(){return b}),n.d(t,"c",function(){return v}),n.d(t,"p",function(){return P}),n.d(t,"j",function(){return E}),n.d(t,"g",function(){return O}),n.d(t,"i",function(){return w}),n.d(t,"o",function(){return y}),n.d(t,"l",function(){return j}),n.d(t,"k",function(){return S}),n.d(t,"n",function(){return N}),n.d(t,"m",function(){return k}),n.d(t,"b",function(){return I}),n.d(t,"d",function(){return x}),n.d(t,"e",function(){return A}),n.d(t,"h",function(){return L}),n.d(t,"A",function(){return T}),n.d(t,"q",function(){return C}),n.d(t,"B",function(){return D}),n.d(t,"C",function(){return B}),n.d(t,"D",function(){return F}),n.d(t,"r",function(){return J}),n.d(t,"v",function(){return K}),n.d(t,"t",function(){return Z}),n.d(t,"u",function(){return q}),n.d(t,"E",function(){return Q}),n.d(t,"s",function(){return V}),n.d(t,"x",function(){return Y}),n.d(t,"y",function(){return X}),n.d(t,"w",function(){return $}),n.d(t,"z",function(){return ee});var h="SEND-MESSAGE",b="ADD-POST",v="FOLLOW",P="UNFOLLOW",E="SET-USERS",O="SET-CURRENT-PAGE",w="SET-TOTAL-USERS-COUNT",y="TOGGLE-IS-LOADING",j="SET-USER-PROFILE",S="network/auth/SET-USER-DATA",N="TOGGLE-IS-FOLLOWING-PROGRESS",k="SET-USER-STATUS",I="DELETE-POST",x="INITIALIZED-SUCCESS",A="SAVE-PHOTO-SUCCESS",L="SET-PAGE-PERIOD",T=function(e){return{type:h,content:e}},C=function(e){return{type:b,postMessage:e}},_=function(e){return{type:v,id:e}},U=function(e){return{type:P,id:e}},D=function(e){return{type:O,page:e}},z=function(e){return{type:y,loadingStatus:e}},R=function(e,t,n,r){return{type:S,userId:e,email:t,login:n,isAuth:r}},H=function(e,t){return{type:N,status:e,userId:t}},G=function(e){return{type:k,status:e}},B=function(e){return{type:L,usePage:e}},M=function(){return{type:x}},W=function(){var e=Object(u.a)(a.a.mark(function e(t,n,r,u){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(H(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(u(n)),t(H(!1,n));case 6:case"end":return e.stop()}},e)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),F=function(e){return function(){var t=Object(u.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=o.getDeleteUser.bind(o),W(n,e,r,U);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(u.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=o.getPostUser.bind(o),W(n,e,r,_);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},K=function(e,t){return function(){var n=Object(u.a)(a.a.mark(function n(r){var u;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(z(!0)),n.next=3,o.getUsers(e,t);case 3:u=n.sent,r(z(!1)),r((s=u.items,{type:E,users:s})),r((a=u.totalCount,{type:w,count:a}));case 7:case"end":return n.stop()}var a,s},n)}));return function(e){return n.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(u.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:r=t.sent,n({type:j,profile:r});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(u.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:r=t.sent,n(G(r));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Q=function(e){return function(){var t=Object(u.a)(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e);case 2:0===t.sent.resultCode&&n(G(e));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},V=function(){return function(){var e=Object(u.a)(a.a.mark(function e(t){var n,r,u,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:0===(n=e.sent).resultCode&&(r=n.data,u=r.id,s=r.email,o=r.login,t(R(u,s,o,!0)));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=Object(u.a)(a.a.mark(function r(u){var s,o,c;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d(e,t,n);case 2:0===(s=r.sent).resultCode?u(V()):(o=s.messages.length>0?s.messages[0]:"Something wrong",c=Object(m.a)("login",{_error:"".concat(o)}),u(c));case 4:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},X=function(){return function(){var e=Object(u.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:0===e.sent.data.resultCode&&t(R(null,null,null,!1));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},$=function(){return function(e){var t=e(V());t.then(function(){e(M())}),Promise.all([t]).then(function(){e(M())})}},ee=function(e){return function(){var t=Object(u.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e);case 2:r=t.sent,console.log(r),0===r.resultCode&&n((a=r.data.photos,{type:A,photos:a}));case 5:case"end":return t.stop()}var a},t)}));return function(e){return t.apply(this,arguments)}}()}},55:function(e,t,n){e.exports={appWrapper:"App_appWrapper__2QLAE",appReference:"App_appReference__1Pb7P"}},83:function(e,t,n){e.exports=n.p+"static/media/message.bda0f5d5.svg"},84:function(e,t,n){e.exports=n.p+"static/media/profile.a08e921b.svg"},85:function(e,t,n){e.exports=n.p+"static/media/friends.d556ee07.svg"}},[[133,2,3]]]);
//# sourceMappingURL=main.170769ef.chunk.js.map